# Rime schema settings
# encoding: utf-8

# === æè¿°æ¡£ ===
schema:
  schema_id: jk_wubi
  name: äº”ç¬”Â·çŸ¥å¿ƒ
  author: 
    - ä¿®æ”¹è€… Jack Liu <https://aituyaa.com>
  description: |
    - çŸ¥å¿ƒäº”ç¬”ï¼Œäº”ç¬”Â·æ‹¼éŸ³æ··è¾“ï¼Œå°å•Šå°å¥³ä»†
    - https://github.com/loveminimal/rime-jk
    - å‚è€ƒ Â»
    - https://github.com/rime/rime-wubi
    - https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md
  dependencies:
    # - melt_eng                         # è‹±æ–‡è¾“å…¥ï¼Œä½œä¸ºæ¬¡ç¿»è¯‘å™¨æŒ‚è½½åˆ°æ‹¼éŸ³æ–¹æ¡ˆ
    - pinyin_simp
  icon: 'assets/jk.ico'
  ascii_icon: 'assets/ascii.ico'
  version: 6.2.0


# === åˆå§‹åŒ– ===
# --- è¶…çº§æ³¨é‡Š ---
pro_comment_format:
  fuzhu_code: true                       # å¯ç”¨è¾…åŠ©ç æé†’
  candidate_length: 0                    # å€™é€‰è¯è¾…åŠ©ç æé†’çš„ç”Ÿæ•ˆé•¿åº¦ï¼Œ0 ä¸ºå…³é—­
  fuzhu_type: wubi                       # ç”¨äºåŒ¹é…å¯¹åº”çš„è¾…åŠ©ç æ³¨é‡Šæ˜¾ç¤º


# === å€™é€‰ ===
# menu:
#   page_size: 10


# === å¼€å…³ ===
# reset: â† 0 1 â†’
switches:
  - name: ascii_mode
    reset: 0 
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
  # - name: full_shape
  #   states: [åŠè§’, å…¨è§’]
  - name: emoji
    reset: 1
    states: [ ğŸ’€, ğŸ˜„ ]
  - name: chaifen
    reset: 0
    states: [ éšæ‹†, æ˜¾æ‹† ]


# === å¼•æ“ ===
engine:
  # --- å¤„ç†å„ç±»æŒ‰é”®æ¶ˆæ¯ ---
  processors:
    - ascii_composer                     # å¤„ç†è¥¿æ–‡æ¨¡å¼åŠä¸­è¥¿æ–‡åˆ‡æ¢
    - key_binder                         # åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å°†æŒ‰é”®ç»‘å®šåˆ°å…¶ä»–æŒ‰é”®ï¼Œæ”¾åœ¨å…¶ä»– processor ä¹‹å‰åˆ¤å®šâ€¦â€¦
    - recognizer                         # ä¸ matcher æ­é…ï¼Œå¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥ç­‰ tags
    - speller                            # æ‹¼å†™å¤„ç†å™¨ï¼ŒæŠŠå­—æ¯è¿½åŠ åˆ°ç¼–ç ä¸²
    - punctuator                         # å¥è¯»å¤„ç†å™¨ï¼ˆå¤„ç†ç¬¦å·æŒ‰é”®ï¼‰ï¼Œå°†å•ä¸ªå­—ç¬¦æŒ‰é”®ç›´æ¥æ˜ å°„ä¸ºæ ‡ç‚¹ç¬¦å·æˆ–æ–‡å­—
    - selector                           # é€‰å­—å¤„ç†å™¨ï¼Œé€‰å­—ã€æ¢é¡µ
    - navigator                          # ç§»åŠ¨æ’å…¥ç‚¹ï¼Œå³å¤„ç†æ å†…çš„å…‰æ ‡ç§»åŠ¨
    - express_editor                     # ç¼–è¾‘å™¨ï¼Œå¤„ç†ç©ºæ ¼ã€å›è½¦ä¸Šå±ã€å›é€€é”®ã€‚ç©ºæ ¼ç¡®è®¤å½“å‰è¾“å…¥ã€å…¶ä»–å­—ç¬¦ç›´æ¥ä¸Šå±

  # --- è¯†åˆ«ä¸åŒå†…å®¹ç±»å‹ï¼Œå°†è¾“å…¥ç åˆ†æ®µå¹¶åŠ ä¸Š tag ---
  segmentors:                            #
    - ascii_segmentor                    # æ ‡è¯†è¥¿æ–¹æ®µè½å­—æ¯ç›´æ¥ä¸Šå±
    - matcher                            # é…åˆ recognizer æ ‡ç­¾ç¬¦åˆç‰¹å®šè§„åˆ™çš„æ®µè½ï¼Œå¦‚ç½‘å€ã€åæŸ¥ç­‰ï¼ŒåŠ ä¸Šé€‰å®š tag
    - abc_segmentor                      # æ ‡è¯†å¸¸è§„çš„æ–‡å­—æ®µè½ï¼ŒåŠ ä¸Š abc è¿™ä¸ª tag
    - punct_segmentor                    # æ ‡è¯†å¥è¯»æ®µè½ï¼Œé”®å…¥æ ‡ç‚¹ç¬¦å·ç”¨ï¼ŒåŠ ä¸Š punct è¿™ä¸ª tag 
    - fallback_segmentor                 # æ ‡è¯†å…¶ä»–æœªæ ‡è¯†çš„æ®µè½
    # - affix_segmentor                  # ç”¨æˆ·è‡ªå®šä¹‰ tag - æ­¤é¡¹å¯åŠ è½½å¤šä¸ªå®ä¾‹ï¼Œåæ¥ @+tagå
    # - lua_segmentor                    # ä½¿ç”¨ lua è‡ªå®šä¹‰åˆ‡åˆ†ï¼Œåæ¥ @+lua å‡½æ•°å
    
  # --- ç¿»è¯‘ç‰¹å®šç±»å‹çš„ç¼–ç æ®µä¸ºä¸€ç»„å€™é€‰æ–‡å­— ---
  translators:
    # - echo_translator                  # æ²¡æœ‰å…¶ä»–å€™é€‰å­—æ—¶ï¼Œå›æ˜¾è¾“å…¥ç ï¼Œåˆ›å»ºä¸€ä¸ªä¸ç¼–ç ä¸²ç›¸åŒçš„ä¿®è¡Œé¡¹
    - punct_translator                   # é…åˆ punct_segmentor è¿›è¡Œç¬¦å·è½¬æ¢
    - table_translator                   # ç è¡¨ç¿»è¯‘å™¨ï¼Œç”¨äºä»“é¢‰ã€äº”ç¬”ç­‰åŸºäºç è¡¨çš„è¾“å…¥æ–¹æ¡ˆï¼Œ
                                         # ... æ­¤é¡¹å¯ä»¥åŠ è½½å¤šä¸ªå®ä¾‹ï¼Œåæ¥ @+ç¿»è¯‘å™¨å (å¦‚ cangjieã€wubi ç­‰)
    - table_translator@custom_phrase     # è‡ªå®šä¹‰çŸ­è¯­ custom_phrase.txt
    # - table_translator@melt_eng        # è‹±æ–‡è¾“å…¥
    - reverse_lookup_translator          # åæŸ¥ç¿»è¯‘å™¨ï¼Œç”¨å¦ä¸€ç§ç¼–ç æ–¹æ¡ˆæŸ¥ç 
    - lua_translator@*date_translator    # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
    - lua_translator@*force_gc           # æš´åŠ› GC é™ä½å†…å­˜
  
  # --- è¿‡æ»¤ç¿»è¯‘çš„ç»“æœï¼Œè‡ªå®šä¹‰æ»¤é•œçš†å¯ä½¿ç”¨å¼€å…³è°ƒæ§ ---
  filters:
    # lua çš„ filterï¼š
    - lua_filter@*pro_comment_format     # è¶…çº§æ³¨é‡Šæ¨¡å—
    - lua_filter@*is_in_user_dict        # ç”¨æˆ·è¯å…¸çš„è¯åŠ ä¸Šä¸€ä¸ª*
    # åæŸ¥çš„ filter
    - simplifier                         # ç”¨å­—è½¬æ¢ï¼Œï¼Ÿé»˜è®¤ç¹è½¬ç®€
    - simplifier@emoji                   # Emoji
    - uniquifier                         # è¿‡æ»¤é‡å¤çš„å€™é€‰å­—ï¼Œæœ‰å¯èƒ½æ¥è‡ª simplifier
    - simplifier@chaifen                 # äº”ç¬”çš„æ‹†åˆ†æ»¤é•œ


# === speller ===
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  # initials å®šä¹‰ä»…ä½œä¸ºå§‹ç çš„æŒ‰é”®ï¼Œæ’é™¤ ` è®©å•ä¸ªçš„ ` å¯ä»¥ç›´æ¥ä¸Šå±
  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`
  delimiter: " z"                        # ç¬¬ä¸€ä½<ç©ºæ ¼>æ˜¯æ‹¼éŸ³ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼›ç¬¬äºŒä½ <z> è¡¨ç¤ºå¯ä»¥æ‰‹åŠ¨è¾“å…¥ z æ¥åˆ†å‰²æ‹¼éŸ³
  # max_code_length: 4                   # å½¢ç æœ€å¤§ç é•¿ï¼Œè¶…è¿‡åˆ™é¡¶å­—ä¸Šå±ï¼Œå››ç é¡¶å­—ä¸Šå±


# === segmentor ===
abc_segmentor:
  extra_tags:                            # ä¸ºæ­¤ segmentor æ‰€æ ‡è®°çš„æ®µè½æ’ä¸Šå…¶å®ƒ tag
    - reverse_lookup


# === æ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰ä¸€ä¸ªä¸» translator ===
translator:
  dictionary: jk_wubi                    # ä¸ wubi86 å…±ç”¨è¯å…¸ï¼Œè®¾å®š table_translator ä½¿ç”¨çš„è¯å…¸å
  prism: jk_wubi                         # prism è¦ä»¥æœ¬è¾“å…¥æ–¹æ¡ˆçš„åç§°æ¥å‘½åï¼Œä»¥å…æŠŠ wubi86 çš„æ‹¼å†™æ˜ å°„è¦†ç›–æ‰
  enable_charset_filter: true            # æ˜¯å¦å¼€å¯å­—ç¬¦é›†è¿‡æ»¤
  encode_commit_history: true            # æ˜¯å¦å¯¹å·²ä¸Šå±è¯è‡ªåŠ¨æˆè¯
  max_phrase_length: 4                   # æœ€å¤§è‡ªåŠ¨æˆè¯è¯é•¿
  disable_user_dict_for_patterns:        # ç¦æ­¢æŸäº›ç¼–ç å½•å…¥ç”¨æˆ·è¯å…¸
    - "^z.*$"
  enable_sentence: true                  # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥
  enable_user_dict: true                 # æ˜¯å¦å¼€å¯ç”¨æˆ·è¯å…¸ï¼ˆç”¨æˆ·è¯å…¸è®°å½•åŠ¨æ€å­—è¯é¢‘ã€ç”¨æˆ·è¯ï¼‰
  enable_encoder: true                   # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ è¯
  comment_format: {comment}              # å°†æ³¨é‡Šä»¥è¯å…¸å­—ç¬¦ä¸²å½¢å¼å®Œå…¨æš´éœ²ï¼Œé€šè¿‡pro_comment_format.luaå®Œå…¨æ¥ç®¡ï¼Œçµæ´»é…ç½®
  # --- melt_eng ---
  # enable_word_completion: true         # å¤§äº 4 éŸ³èŠ‚çš„è¯æ¡è‡ªåŠ¨è¡¥å…¨ï¼Œlibrime > 1.11.2
  # initial_quality: 1.2                   # æ‹¼éŸ³çš„æƒé‡åº”è¯¥æ¯”è‹±æ–‡å¤§

# æ¬¡ç¿»è¯‘å™¨ï¼Œè‹±æ–‡
# melt_eng:
#   dictionary: melt_eng                   # æŒ‚è½½è¯åº“ melt_eng.dict.yaml
#   enable_sentence: false                 # ç¦æ­¢é€ å¥
#   enable_user_dict: false                # ç¦ç”¨ç”¨æˆ·è¯å…¸
#   initial_quality: 1.1                   # åˆå§‹æƒé‡
#   comment_format:                        # è‡ªå®šä¹‰æç¤ºç 
#     - xform/.*//                         # æ¸…ç©ºæç¤ºç 


# === Lua é…ç½®: æ—¥æœŸæ—¶é—´(æ•´åˆç‰ˆ)çš„è§¦å‘å…³é”®å­— ===
date_translator:
  jk_datetime: iii


# === åæŸ¥ ===
reverse_lookup:
  dictionary: pinyin_simp
  # prefix: "`"
  prefix: "/"
  suffix: "'"
  tips: ã€”æ‹¼éŸ³Â·åæŸ¥ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/


# === è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt ===
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase
  db_class: stabledb                     # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false               # è¡¥å…¨æç¤º
  enable_sentence: false                 # ç¦æ­¢é€ å¥
  initial_quality: 99                    # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§


# === Emoji ===
emoji:
  option_name: emoji
  opencc_config: emoji.json
  inherit_comment: false


# === äº”ç¬”æ‹†åˆ†æ»¤é•œ ===
chaifen:
  opencc_config: wb_cf.json
  option_name: chaifen
  show_in_comment: true 
  comment_format:     
    - "xform/-/ /"
    # - "xform/&nbsp;/ /"
  tags:     
    - abc
    - wubi86
    - reverse_lookup
  # charâ†å­— è¯â†’all
  tips: all                              


# === æ ‡ç‚¹ç¬¦å·æ§åˆ¶ ===
punctuator:
  import_preset: default
  symbols:
    __include: symbols_z:/symbols          # ä» symbols_z.yaml å¯¼å…¥é…ç½®


# === é”®ä½ç»‘å®š ===
key_binder:
  import_preset: default


# === ä¸‹è®¾ patterns ï¼Œé…åˆ segmentor çš„ prefix å’Œ suffix å®Œæˆæ®µè½åˆ’åˆ†ã€tag åˆ†é… ===
recognizer:
  # import_preset: default
  patterns:
    # reverse_lookup: "`[a-z]*'?$"
    reverse_lookup: "/[a-z]*'?$"
    punct: "^z([0-9]|10|[A-Za-z]+)$"     # å“åº” symbols_v.yaml çš„ symbolsï¼Œç”¨ 'z' æ›¿æ¢ '/'

