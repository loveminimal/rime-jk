# Rime JK model
# encoding: utf-8

version: v6.6.6

# --- å¼€å…³ ---
# reset: â† 0 1 â†’
switches:
  - name: ascii_mode
    reset: 0 
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
  - name: traditionalization
    states: [ ç®€ä½“, ç¹ä½“ ]  
    reset: 0
  - name: emoji
    reset: 0
    states: [ ğŸ’€, ğŸ˜„ ]
  - name: zh2en
    reset: 0
    states: [ â˜·è¯‘, â˜°è¯‘ ]
  - name: chaifen
    reset: 0
    states: [ éšæ‹†, æ˜¾æ‹† ]
  - name: char_only
    reset: 0
    states: [ è¯è¯­, å•å­— ]


# --- è¯†åˆ«å™¨ ---
# -------------------------------------
# åŒ¹é…ç‰¹å®šçš„è¾“å…¥æ¨¡å¼ï¼Œå¹¶ç»™å®ƒä»¬æ‰“ä¸Šæ ‡ç­¾ï¼Œä»¥ä¾¿åç»­åˆ‡åˆ†ã€ç¿»è¯‘å¤„ç†
# reverse_lookup  åæŸ¥æ ‡ç­¾
# punct           è‡ªå®šä¹‰ç¬¦å·æ˜ å°„ï¼Œå“åº” symbols_v.yaml çš„ symbolsï¼Œç”¨ 'z' æ›¿æ¢ '/'
# pinyin          æ‹¼éŸ³åæŸ¥ï¼Œå–æ¶ˆå¼•å¯¼è¯ï¼Œç›´æ¥äº”ç¬”æ‹¼éŸ³æ··è¾“ã€Œç”¨ä»»æ„å¤§å†™å­—æ¯éš”å¼€ï¼Œé˜²æ­¢åæŸ¥æ··å…¥ã€
# add_user_dict   è‡ªé€ è¯
# ^z[Xa-z]*$      é¿å…åœ¨ jk_ascii æ¨¡å¼ä¸­ zZ æ— æ³•ç›´æ¥ä¸Šå±
# -------------------------------------
recognizer:
  # import_preset: default
  patterns:
    reverse_lookup: "^~~[a-z]*:?$"
    punct: "^~([0-9]|10|[A-Za-z]+)$"
    # pinyin: "^z[Xa-z]*$" 
    pinyin: "^Z[a-z]*$"    
    add_user_dict: "^ZZ[a-z]*$"
    helper: "^(~help|hH)$"
    quick_symbol: "^;.*$" 


# --- æ ‡ç‚¹ç¬¦å·å¤„ç†å™¨ --
# -------------------------------------
# è´Ÿè´£å¤„ç†æ ‡ç‚¹ç¬¦å·è¾“å…¥ï¼Œå¯å¯¼å…¥ç¬¦å·æ˜ å°„ã€Œå¦‚ symbols_zã€
# -------------------------------------
punctuator:
  import_preset: default
  symbols:
    __include: symbols_z:/symbols


# --- åæŸ¥ ---
# -------------------------------------
# date_translator æ—¥æœŸæ—¶é—´è¾“å…¥
# reverse_lookup  è‹±æ–‡ç¿»è¯‘å­—å…¸
# pinyin          æ‹¼éŸ³åæŸ¥
# custom_phrase   è‡ªå®šä¹‰ç è¡¨
# -------------------------------------
date_translator:
  jk_datetime: ~d

reverse_lookup:
  dictionary: jk_ascii
  prefix: "~~"
  suffix: ":"
  tips: ã€”è‹±æ–‡Â·åæŸ¥ã€•
  enable_completion: true
  preedit_format:
    - xlit|~| |

pinyin:
  tag: pinyin
  dictionary: jk_chars
  prefix: "Z"
  suffix: "'"
  tips: ã€”æ‹¼éŸ³Â·åæŸ¥ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/

user_dict_set:
  dictionary: jk_pinyin
  user_dict: jk_pinyin_u
  initial_quality: 0
  enable_completion: false
  enable_sentence: false
  spelling_hints: 100
  comment_format:
    - xform/[^;]*;([^;]*)//
  enable_user_dict: true

add_user_dict:
  dictionary: jk_pinyin
  user_dict: jk_pinyin_u
  tag: add_user_dict
  initial_quality: -1
  enable_charset_filter: false
  enable_completion: true
  enable_encoder: true
  enable_sentence: true
  enable_user_dict: true
  encode_commit_history: false
  preedit_format:   
  comment_format:
    - xform/[^;]*;([^;]*)/$1/
  prefix: "ZZ"
  tips: "ã€”å­—è¯Â·è‡ªé€ ã€•"

# -------------------------------------
# custom_phrase:
#   db_class: stabledb        åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
#   enable_completion: false  è¡¥å…¨æç¤º
#   enable_sentence: false    ç¦æ­¢é€ å¥
# -------------------------------------
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase
  db_class: stabledb      
  enable_completion: false
  enable_sentence: false  
  initial_quality: 99


# --- å¹¶å‡» ---
# -------------------------------------
# prompt_format å¹¶å‡»è¿‡ç¨‹ä¸­å¥—ç”¨å¼æ ·ã€ŒåŠ æ–¹æ‹¬å·ã€
# output_format å¹¶å‡»å®Œæˆåå¥—ç”¨å¼æ ·
# alphabet      å‡»é”®ä¸€å¾‹ä»¥å­—æ¯è¡¨é¡ºåºæ’åˆ—ã€Œå­—æ¯è¡¨ï¼ŒåŒ…å«ç”¨å¹¶å‡»æŒ‰é”®ã€
# algebra       è¿ç®—è§„åˆ™
# -------------------------------------
# --- å®Œæ•´ç‰ˆ ---
chord_composer:
  finish_chord_on_first_key_release: true
  prompt_format:
    # - "xform/^(.*)$/[$1]/" 
    - "xform/^(.*)$//" 
  output_format:
    - "xform/^(.*)å·¦/$1/"
    - "xform/^(.*)å³$/$1/"
    - "xform/^(.*)å·¦(.*)å³$/$1$2/"
  # å­—æ¯è¡¨ï¼ŒåŒ…å«ç”¨å¹¶å‡»æŒ‰é”®
  # å‡»é”®ä¸€å¾‹ä»¥å­—æ¯è¡¨é¡ºåºæ’åˆ—
  # alphabet: "aqzswxdecfrvgtbhynjumki,lo.;p',./"
  # alphabet: "aqzswxdecfrvgtbhynjumki,lo.;p'/"
  alphabet: "aqzswxdecfrvgtbhynjumki,lo.;p'/1234567890"
  algebra:
    __include: algebra.yaml:/algebra_mirror

# --- è¿·ä½ ç‰ˆ ---
chord_composer_mini:
  prompt_format:
    - "xform/^(.*)$/[$1]/" 
  output_format:
    - "xform/^(.*)å·¦/$1/"
    - "xform/^(.*)å³$/$1/"
    - "xform/^(.*)å·¦(.*)å³$/$1$2/"
  # alphabet: ",."
  algebra:
    # --- ä¿®æ”¹ä¸ºå¹¶å‡»é”®ä½ ---
    # å®šä¹‰å·¦æ‰‹é”®
    # - xform/^er(?![å·¦å³])/yå·¦/
    # å®šä¹‰å³æ‰‹é”®
    # - xform/z;(?![å·¦å³])$/Zå³/
    # --- ç¬¦å·å¿«è¾“ ---
    # ---------------------------------
    # ä»…ä¿ç•™ã€” ,. â­ ~ ã€•ï¼Œå…¶ä½™ä½¿ç”¨å¿«ç¬¦
    # ---------------------------------
    - xform/,\.(?![å·¦å³])$/~å³/


# --- OpenCC ---
# -------------------------------------
# emoji 
# zh2en   ä¸­è¯‘è‹±
# chaifen äº”ç¬”æ‹†åˆ†
# -------------------------------------
emoji:
  option_name: emoji
  opencc_config: emoji.json
  inherit_comment: false

zh2en:
  option_name: zh2en
  opencc_config: zh2en.json
  inherit_comment: false

# -------------------------------------
# tips  charâ†å­— è¯â†’all
# -------------------------------------
chaifen:
  opencc_config: hu_cf.json
  option_name: chaifen
  show_in_comment: true 
  comment_format:     
    - "xform/-/ /"
  tags:     
    - abc
    - pinyin
  tips: char   


# -------------------------------------
# ç®€ç¹åˆ‡æ¢ 
# opencc_config s2t.json â†’ s2t.json | s2hk.json  | s2tw.json | s2twp.json
# tips                   â†’ all | char | none
# -------------------------------------
traditionalize:
  option_name: traditionalization
  opencc_config: s2t.json
  tips: char
  tags: [ abc, number, gregorian_to_lunar ]


# -------------------------------------
# è¯­è¨€å¤§æ¨¡å‹ octagram 
# wanxiang-lts-zh-hans
# -------------------------------------
octagram:
  __patch:
    grammar:
      language: wanxiang-lts-zh-hans
      collocation_max_length: 8    
      collocation_min_length: 2    
      collocation_penalty: -10     
      non_collocation_penalty: -12 
      weak_collocation_penalty: -24
      rear_penalty: -30            
    translator/contextual_suggestions: false
    translator/max_homophones: 5
    translator/max_homographs: 5