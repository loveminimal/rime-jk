# Rime schema settings
# encoding: utf-8

# === æè¿°æ¡£ ===
schema:
  schema_id: flypy_rime_jk  # æ–¹æ¡ˆå†…éƒ¨åï¼Œåœ¨ä»£ç ä¸­å¼•ç”¨æ­¤æ–¹æ¡ˆæ—¶ä»¥æ­¤åä¸ºå‡†
  name: çŸ¥å¿ƒå°é¹¤            # æ–¹æ¡ˆæ˜¾ç¤ºåç§°ï¼Œåœ¨æ–¹æ¡ˆé€‰å•ä¸­æ˜¾ç¤º
  author: 
    - å‘æ˜äºº double pinyin layout by é¹¤
    - æ’°å†™è€… Jack Liu
  description: |
    çŸ¥å¿ƒçš„å°é¹¤ã€‚
    https://github.com/loveminimal/rime-jk
  dependencies:
    - emoji
    - stroke
    - pinyin_simp
  version: 2.0.0            # ç‰ˆæœ¬å·ï¼Œåœ¨å‘å¸ƒæ–°ç‰ˆå‰è¯·ç¡®ä¿å·²å‡çº§ç‰ˆæœ¬å·
  icon: "assets/fly_b.ico"
  # icon: "assets/fly_y.ico"
  ascii_icon: 'assets/ascii.ico'


# === å¼€å…³ ===
switches:
  - name: ascii_mode        # ä¸­è‹±æ–‡è½¬æ¢å¼€å…³ï¼Œ0-ä¸­æ–‡  1-è‹±æ–‡
    reset: 0 
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape        # åŠè§’/å…¨è§’è½¬æ¢ï¼Œ0-åŠè§’ 1-å…¨è§’
    states: [åŠè§’, å…¨è§’]
  # - name: extended_charset
  #   states: [ å¸¸ç”¨, å¢å»£ ]
  # - name: simplification    # ç¹ç®€è½¬æ¢å¼€å…³ï¼Œ0-å¦ 1-æ˜¯
  #   # reset: 0
  #   states: [ æ¼¢å­—, æ±‰å­— ]
  # - name: ascii_punct
  #   states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji
    reset: 1
    states: [ ğŸ’€, ğŸ˜„ ]
  - name: chaifen
    reset: 0 
    states: [ æ‹†éš, æ‹†æ˜¾ ]


# === å¼•æ“ ===
engine:
  # --- å¤„ç†å„ç±»æŒ‰é”®æ¶ˆæ¯ ---
  processors:
    - ascii_composer        # å¤„ç†è¥¿æ–‡æ¨¡å¼åŠä¸­è¥¿æ–‡åˆ‡æ¢
    - recognizer            # ä¸ matcher æ­é…ï¼Œå¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥ç­‰ tags
    - key_binder            # åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å°†æŒ‰é”®ç»‘å®šåˆ°å…¶ä»–æŒ‰é”®ï¼Œæ”¾åœ¨å…¶ä»– processor ä¹‹å‰åˆ¤å®šâ€¦â€¦
    - speller               # æ‹¼å†™å¤„ç†å™¨ï¼ŒæŠŠå­—æ¯è¿½åŠ åˆ°ç¼–ç ä¸²
    - punctuator            # å¥è¯»å¤„ç†å™¨ï¼ˆå¤„ç†ç¬¦å·æŒ‰é”®ï¼‰ï¼Œå°†å•ä¸ªå­—ç¬¦æŒ‰é”®ç›´æ¥æ˜ å°„ä¸ºæ ‡ç‚¹ç¬¦å·æˆ–æ–‡å­—
    - selector              # é€‰å­—å¤„ç†å™¨ï¼Œé€‰å­—ã€æ¢é¡µ
    - navigator             # ç§»åŠ¨æ’å…¥ç‚¹ï¼Œå³å¤„ç†æ å†…çš„å…‰æ ‡ç§»åŠ¨
    - express_editor        # ç¼–è¾‘å™¨ï¼Œå¤„ç†ç©ºæ ¼ã€å›è½¦ä¸Šå±ã€å›é€€é”®ã€‚ç©ºæ ¼ç¡®è®¤å½“å‰è¾“å…¥ã€å…¶ä»–å­—ç¬¦ç›´æ¥ä¸Šå±
    # - fluid_editor          # å¥å¼ç¼–è¾‘å™¨ï¼Œç”¨äºä»¥ç©ºæ ¼æ–­è¯ã€å›è½¦ä¸Šå±çš„æ³¨éŸ³ã€è¯­å¥æµç­‰è¾“å…¥æ–¹æ¡ˆï¼›æ›¿æ¢ express_editor
    # - lua_processor         # ä½¿ç”¨ lua è‡ªå®šä¹‰æŒ‰é”®ï¼Œåæ¥ @+luaå‡½æ•°å - å³ç”¨æˆ·æ–‡ä»¶å¤¹å†… rime.lua ä¸­å‡½æ•°åï¼Œå‚æ•°ä¸º (key, env)

  # --- è¯†åˆ«ä¸åŒå†…å®¹ç±»å‹ï¼Œå°†è¾“å…¥ç åˆ†æ®µå¹¶åŠ ä¸Š tag ---
  segmentors:               #
    - ascii_segmentor       # æ ‡è¯†è¥¿æ–¹æ®µè½å­—æ¯ç›´æ¥ä¸Šå±
    - matcher               # é…åˆ recognizer æ ‡ç­¾ç¬¦åˆç‰¹å®šè§„åˆ™çš„æ®µè½ï¼Œå¦‚ç½‘å€ã€åæŸ¥ç­‰ï¼ŒåŠ ä¸Šé€‰å®š tag
    - abc_segmentor         # æ ‡è¯†å¸¸è§„çš„æ–‡å­—æ®µè½ï¼ŒåŠ ä¸Š abc è¿™ä¸ª tag
    - punct_segmentor       # æ ‡è¯†å¥è¯»æ®µè½ï¼Œé”®å…¥æ ‡ç‚¹ç¬¦å·ç”¨ï¼ŒåŠ ä¸Š punct è¿™ä¸ª tag 
    - fallback_segmentor    # æ ‡è¯†å…¶ä»–æœªæ ‡è¯†çš„æ®µè½
    # - affix_segmentor       # ç”¨æˆ·è‡ªå®šä¹‰ tag - æ­¤é¡¹å¯åŠ è½½å¤šä¸ªå®ä¾‹ï¼Œåæ¥ @+tagå
    # - lua_segmentor         # ä½¿ç”¨ lua è‡ªå®šä¹‰åˆ‡åˆ†ï¼Œåæ¥ @+lua å‡½æ•°å
    
  # --- ç¿»è¯‘ç‰¹å®šç±»å‹çš„ç¼–ç æ®µä¸ºä¸€ç»„å€™é€‰æ–‡å­— ---
  translators:
    # - echo_translator               # æ²¡æœ‰å…¶ä»–å€™é€‰å­—æ—¶ï¼Œå›æ˜¾è¾“å…¥ç ï¼Œåˆ›å»ºä¸€ä¸ªä¸ç¼–ç ä¸²ç›¸åŒçš„ä¿®è¡Œé¡¹
    - punct_translator                # é…åˆ punct_segmentor è¿›è¡Œç¬¦å·è½¬æ¢
    # - table_translator                # ç è¡¨ç¿»è¯‘å™¨ï¼Œç”¨äºä»“é¢‰ã€äº”ç¬”ç­‰åŸºäºç è¡¨çš„è¾“å…¥æ–¹æ¡ˆï¼Œ
                                      #- æ­¤é¡¹å¯ä»¥åŠ è½½å¤šä¸ªå®ä¾‹ï¼Œåæ¥ @+ç¿»è¯‘å™¨å (å¦‚ cangjieã€wubi ç­‰)
    - script_translator               # è„šæœ¬ç¿»è¯‘å™¨ï¼Œç”¨äºæ‹¼éŸ³ã€ç²¤æ‹¼ç­‰åŸºäºéŸ³èŠ‚è¡¨çš„è¾“å…¥æ–¹æ¡ˆï¼Œ
                                      #- æ­¤é¡¹å¯ä»¥åŠ è½½å¤šä¸ªå®ä¾‹ï¼Œåæ¥ @+ç¿»è¯‘å™¨å (å¦‚ pinyinã€yjutping ç­‰)
    - reverse_lookup_translator       # åæŸ¥ç¿»è¯‘å™¨ï¼Œç”¨å¦ä¸€ç§ç¼–ç æ–¹æ¡ˆæŸ¥ç 
    # - lua_translator                # ä½¿ç”¨ lua è‡ªå®šä¹‰è¾“å…¥ï¼Œä¾‹å¦‚åŠ¨æ€è¾“å…¥å½“å‰æ—¥æœŸã€æ—¶é—´ï¼Œåæ¥ @+lua å‡½æ•°å
    #                                 # - lua å‡½æ•°åå³ç”¨æˆ·æ–‡ä»¶å¤¹å†… rime.lua ä¸­çš„å‡½æ•°åï¼Œå‚æ•°ä¸º (input, seg, env)
    #                                 # - å¯ä»¥ env.engine.context:get_option("option_name") æ–¹å¼ç»‘å®šåˆ° switch å¼€å…³ / key_binder å¿«æ·é”®
    - lua_translator@date_translator  # æ—¶é—´ã€æ—¥æœŸã€æ˜ŸæœŸ
    - table_translator@custom_phrase  # è‡ªå®šä¹‰çŸ­è¯­ custom_phrase.txt
  
  # --- è¿‡æ»¤ç¿»è¯‘çš„ç»“æœï¼Œè‡ªå®šä¹‰æ»¤é•œçš†å¯ä½¿ç”¨å¼€å…³è°ƒæ§ ---
  filters:
    - simplifier            # ç”¨å­—è½¬æ¢ï¼Œï¼Ÿé»˜è®¤ç¹è½¬ç®€
    - simplifier@emoji      # Emoji
    - uniquifier            # è¿‡æ»¤é‡å¤çš„å€™é€‰å­—ï¼Œæœ‰å¯èƒ½æ¥è‡ª simplifier
    - simplifier@chaifen    # è™ç çš„æ‹†åˆ†æ»¤é•œ
    # - lua_filter            # ä½¿ç”¨ lua è‡ªå®šä¹‰è¿‡æ»¤ï¼Œå¦‚è¿‡æ»¤å­—ç¬¦é›†ã€è°ƒæ•´æ’åºï¼Œåæ¥ @+lua å‡½æ•°å
    #                         # - lua å‡½æ•°åå³ç”¨æˆ·æ–‡ä»¶å¤¹å†… rime.lua ä¸­çš„å‡½æ•°åï¼Œå‚æ•°ä¸º (input,  env)
    #                         # - å¯ä»¥ env.engine.context:get_option("option_name") æ–¹å¼ç»‘å®šåˆ° switch å¼€å…³ / key_binder å¿«æ·é”®


# === speller ===
speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba  # å®šä¹‰æœ¬æ–¹æ¡ˆè¾“å…¥é”®
  delimiter: " ;'"                      # ä¸Šå±æ—¶çš„éŸ³èŠ‚é—´åˆ†éŸ³ç¬¦
  algebra:                              # æ‹¼å†™è¿ç®—è§„åˆ™ï¼Œç”±ä¹‹ç®—å‡ºçš„æ‹¼å†™æ±‡å…¥ prism ä¸­
    - erase/^xx$/
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/iu$/Q/
    - xform/(.)ei$/$1W/
    - xform/uan$/R/
    - xform/[uv]e$/T/
    - xform/un$/Y/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/uo$/O/
    - xform/ie$/P/
    - xform/i?ong$/S/
    - xform/ing$|uai$/K/
    - xform/(.)ai$/$1D/
    - xform/(.)en$/$1F/
    - xform/(.)eng$/$1G/
    - xform/[iu]ang$/L/
    - xform/(.)ang$/$1H/
    - xform/ian$/M/
    - xform/(.)an$/$1J/
    - xform/(.)ou$/$1Z/
    - xform/[iu]a$/X/
    - xform/iao$/N/
    - xform/(.)ao$/$1C/
    - xform/ui$/V/
    - xform/in$/B/
    - xlit/QWRTYUIOPSDFGHJKLZXCVBNM/qwrtyuiopsdfghjklzxcvbnm/
    #- abbrev/^(.).+$/$1/

# === segmentor ===
abc_segmentor:
  extra_tags:                       # ä¸ºæ­¤ segmentor æ‰€æ ‡è®°çš„æ®µè½æ’ä¸Šå…¶å®ƒ tag
    - reverse_lookup


# === æ¯ä¸ªæ–¹æ¡ˆéƒ½æœ‰ä¸€ä¸ªä¸» translator ===
translator:
  dictionary: py_rime_jk            #  è®¾å®š table_translator ä½¿ç”¨çš„è¯å…¸å
                                       # è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰è¯å…¸ pinyin_simp
  prism: flypy_rime_jk                 # prism è¦ä»¥æœ¬è¾“å…¥æ–¹æ¡ˆçš„åç§°æ¥å‘½å
  # enable_charset_filter: true           # æ˜¯å¦å¼€å¯å­—ç¬¦é›†è¿‡æ»¤
  # encode_commit_history: true           # æ˜¯å¦å¯¹å·²ä¸Šå±è¯è‡ªåŠ¨æˆè¯
  # max_phrase_length: 4                  # æœ€å¤§è‡ªåŠ¨æˆè¯è¯é•¿
  # disable_user_dict_for_patterns:       # ç¦æ­¢æŸäº›ç¼–ç å½•å…¥ç”¨æˆ·è¯å…¸
  #   - "^z.*$"
  enable_sentence: true                 # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥
  enable_user_dict: true                # æ˜¯å¦å¼€å¯ç”¨æˆ·è¯å…¸ï¼ˆç”¨æˆ·è¯å…¸è®°å½•åŠ¨æ€å­—è¯é¢‘ã€ç”¨æˆ·è¯ï¼‰
  enable_encoder: true                  # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ è¯
  preedit_format:                       # å°†å…¶ç›´æ¥ä¿®æ”¹ä¸º comment_format ï¼Œå°±å¯ä»¥è¾“ä»€ä¹ˆæ˜¾ç¤ºä»€ä¹ˆ
  # comment_format:
    - xform/([bpmfdtnljqx])n/$1iao/
    - xform/(\w)g/$1eng/
    - xform/(\w)q/$1iu/
    - xform/(\w)w/$1ei/
    - xform/([dtnlgkhjqxyvuirzcs])r/$1uan/
    - xform/(\w)t/$1ve/
    - xform/(\w)y/$1un/
    - xform/([dtnlgkhvuirzcs])o/$1uo/
    - xform/(\w)p/$1ie/
    - xform/([jqx])s/$1iong/
    - xform/(\w)s/$1ong/
    - xform/(\w)d/$1ai/
    - xform/(\w)f/$1en/
    - xform/(\w)h/$1ang/
    - xform/(\w)j/$1an/
    - xform/([gkhvuirzcs])k/$1uai/
    - xform/(\w)k/$1ing/
    - xform/([jqxnl])l/$1iang/
    - xform/(\w)l/$1uang/
    - xform/(\w)z/$1ou/
    - xform/([gkhvuirzcs])x/$1ua/
    - xform/(\w)x/$1ia/
    - xform/(\w)c/$1ao/
    - xform/([dtgkhvuirzcs])v/$1ui/
    - xform/(\w)b/$1in/
    - xform/(\w)m/$1ian/
    - xform/([aoe])\1(\w)/$1$2/
    - "xform/(^|[ '])v/$1zh/"
    - "xform/(^|[ '])i/$1ch/"
    - "xform/(^|[ '])u/$1sh/"
    - xform/([jqxy])v/$1u/
    - xform/([nl])v/$1Ã¼/

# === Lua é…ç½®: æ—¥æœŸæ—¶é—´(æ•´åˆç‰ˆ)çš„è§¦å‘å…³é”®å­— ===
date_translator:
  jk_datetime: iii


reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”ç¬”ç”»ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xform/([nl])v/$1Ã¼/

# === è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt ===
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase  # å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼Œæ”¹æˆè‡ªå·±çš„ txt æ–‡ä»¶
  db_class: stabledb        # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false  # è¡¥å…¨æç¤º
  enable_sentence: false    # ç¦æ­¢é€ å¥
  initial_quality: 99       # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§


# === Emoji ===
emoji:
  option_name: emoji
  opencc_config: emoji.json
  inherit_comment: false    # åœ¨ corrector.lua åŠåæŸ¥ä¸­ï¼Œemoji è¿”å›ç©ºæ³¨é‡Š

# === æ ‡ç‚¹ç¬¦å·æ§åˆ¶ ===
punctuator:
  import_preset: default    # è®¾å®šç¬¦å·è¡¨ï¼Œè¿™é‡Œç›´æ¥å¯¼å…¥é¢„è®¾çš„


# === é”®ä½ç»‘å®š ===
key_binder:
  import_preset: default
  # è¿ç§»è‡³ default.custom.yaml ï¼Œä»¥æ–¹ä¾¿å¤šæ–¹æ¡ˆå…±äº«


# === ä¸‹è®¾ patterns ï¼Œé…åˆ segmentor çš„ prefix å’Œ suffix å®Œæˆæ®µè½åˆ’åˆ†ã€tag åˆ†é… ===
recognizer:
  patterns:
    import_preset: default
    reverse_lookup: "`[a-z]*'?$"
