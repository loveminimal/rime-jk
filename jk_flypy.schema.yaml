# Rime schema
# encoding: utf-8

# === æè¿°æ¡£ ===
schema:
  schema_id: jk_flypy
  name: å°é¹¤Â·çŸ¥å¿ƒ
  author:
    - å‘æ˜äºº gaboolic
    - æ’°å†™è€… Jack Liu <loveminimal@163.com>
  description: |
    - çŸ¥å¿ƒå°é¹¤ï¼ŒåŒæ‹¼Â·è¾…åŠ©ç ï¼Œå°å•Šå°å°é¹¤
    - https://github.com/loveminimal/rime-jk
    - è¾…åŠ©ç æ–¹æ¡ˆæºè‡ªä¸‡è±¡æ‹¼éŸ³ https://github.com/amzxyz/rime_wanxiang_pro
  # dependencies:
  #   - pinyin_simp
  icon: "assets/fly_b.ico"
  ascii_icon: 'assets/ascii.ico'


# === è¶…çº§æ³¨é‡Šæ¨¡å— ===
pro_comment_format:
  fuzhu_code: true
  candidate_length: 1
  fuzhu_type: flypy


# === å¼€å…³ ===
# reset: â† 0 1 â†’
switches:
  - name: ascii_mode
    reset: 0 
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
  # - name: full_shape
  #   states: [åŠè§’, å…¨è§’]
  - name: emoji
    reset: 1
    states: [ ğŸ’€, ğŸ˜„ ]
  - name: chaifen
    reset: 0
    states: [ éšæ‹†, æ˜¾æ‹† ]


# === å¼•æ“ ===
engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor

  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor

  translators:
    - punct_translator
    - table_translator@custom_phrase
    - script_translator
    - reverse_lookup_translator
    - lua_translator@*date_translator
    - lua_translator@*force_gc
    
  filters:
    # luaçš„filterï¼š
    - lua_filter@*pro_comment_format
    - lua_filter@*is_in_user_dict
    # åæŸ¥çš„filter
    - simplifier
    - simplifier@emoji
    - uniquifier
    - simplifier@chaifen


# === speller ===
speller:
  max_code_length: 5
  auto_select: false
  auto_select_pattern: ^[a-z]+/|^[a-df-zA-DF-Z]\w{3}|^e\w{4}|;[a-z]
  # [ âœ—ä¸Šå± ]
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  # [ âœ“ä¸Šå± ]
  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`
  delimiter: " '"
  algebra:
    # - erase/^xx$/
    - xlit/ÄÃ¡ÇÃ ÅÃ³Ç’Ã²Ä“Ã©Ä›Ã¨Ä«Ã­ÇÃ¬Å«ÃºÇ”Ã¹Ç–Ç˜ÇšÇœÃ¼/aaaaooooeeeeiiiiuuuuvvvvv/
    - derive/^([jqxy])u(;.*)$/$1v$2/
    - derive/^([aoe])([ioun])(;.*)$/$1$1$2$3/
    - xform/^([aoe])(ng)?(;.*)$/$1$1$2$3/
    - xform/^(\w+?)iu(;.*)/$1â“†$2/
    - xform/^(\w+?)ei(;.*)/$1â“Œ$2/
    - xform/^(\w+?)uan(;.*)/$1â“‡$2/
    - xform/^(\w+?)[uv]e(;.*)/$1â“‰$2/
    - xform/^(\w+?)un(;.*)/$1â“$2/
    - xform/^(\w+?)uo(;.*)/$1â“„$2/
    - xform/^(\w+?)ie(;.*)/$1â“…$2/
    - xform/^(\w+?)i?ong(;.*)/$1â“ˆ$2/
    - xform/^(\w+?)ing(;.*)/$1â“€$2/
    - xform/^(\w+?)uai(;.*)/$1â“€$2/
    - xform/^(\w+?)ai(;.*)/$1â’¹$2/
    - xform/^(\w+?)eng(;.*)/$1â’¼$2/
    - xform/^(\w+?)en(;.*)/$1â’»$2/
    - xform/^(\w+?)[iu]ang(;.*)/$1â“$2/
    - xform/^(\w+?)ang(;.*)/$1â’½$2/
    - xform/^(\w+?)ian(;.*)/$1â“‚$2/
    - xform/^(\w+?)an(;.*)/$1â’¿$2/
    - xform/^(\w+?)ou(;.*)/$1â“$2/
    - xform/^(\w+?)iao(;.*)/$1â“ƒ$2/
    - xform/^(\w+?)[iu]a(;.*)/$1â“$2/
    - xform/^(\w+?)ao(;.*)/$1â’¸$2/
    - xform/^(\w+?)ui(;.*)/$1â“‹$2/
    - xform/^(\w+?)in(;.*)/$1â’·$2/
    - xform/^sh/â“Š/
    - xform/^ch/â’¾/
    - xform/^zh/â“‹/
    - xlit/â“†â“Œâ“‡â“‰â“â“Šâ’¾â“„â“…â“ˆâ’¹â’»â’¼â’½â’¿â“€â“â“â“â’¸â“‹â’·â“ƒâ“‚/qwrtyuiopsdfghjklzxcvbnm/
    - abbrev/^([a-z]).+$/$1/
    # --- è¾…åŠ©ç  ---
    # - xform/^(.{2}|\w+?);.*?;(.*?);.*$/$1;$2/   
    - derive|^(.{2});.*$|$1|                                          # çº¯åŒæ‹¼çš„æƒ…å†µ
    - derive|^(.{2});(\w)(\w).*$|$1$2|                                # åŒæ‹¼+ä¸€ä½è¾…åŠ©ç çš„æƒ…å†µ
    - derive|^(.{2});(\w)(\w).*$|$1[$2|                               # åŒæ‹¼+[ä¸€ä½è¾…åŠ©ç çš„æƒ…å†µ
    - derive|^(.{2});.*?,(\w)(\w).*$|$1$2|                            # åŒæ‹¼+ä¸€ä½è¾…åŠ©ç çš„æƒ…å†µ
    - derive|^(.{2});.*?,(\w)(\w).*$|$1[$2|                           # åŒæ‹¼+[ä¸€ä½è¾…åŠ©ç çš„æƒ…å†µ
    - abbrev|^(.{2});(\w)(\w).*$|$1$2$3|                              # åŒæ‹¼+2ä½è¾…åŠ©ç çš„æƒ…å†µï¼Œabbrevç±»å‹ä¸å¯ä»¥æ•´å¥å†…è¾“å…¥2ä½è¾…åŠ©ç ï¼Œå¿…é¡»åŠ oæˆ–/
    - abbrev|^(.{2});.*?,(\w)(\w).*$|$1$2$3|                          # åŒæ‹¼+2ä½è¾…åŠ©ç çš„æƒ…å†µï¼Œabbrevç±»å‹ä¸å¯ä»¥æ•´å¥å†…è¾“å…¥2ä½è¾…åŠ©ç ï¼Œå¿…é¡»åŠ oæˆ–/
    - derive|^(.{2});(\w)(\w).*$|$1$2$3o|                             # æ•´å¥æ¨¡å¼ä¸‹ï¼Œè¾“å…¥syffo å‡ºå•å­— å¢å¼ºå•å­—æ€§èƒ½
    - derive|^(.{2});(\w)(\w).*$|$1$2$3/|                             # æ•´å¥æ¨¡å¼ä¸‹ï¼Œè¾“å…¥syff/ å‡ºå•å­— å¢å¼ºå•å­—æ€§èƒ½
    - derive|^(.{2});.*,(\w)(\w).*$|$1$2$3o|                          # æ•´å¥æ¨¡å¼ä¸‹ï¼Œè¾“å…¥syffo å‡ºå•å­— å¢å¼ºå•å­—æ€§èƒ½
    - derive|^(.{2});.*,(\w)(\w).*$|$1$2$3/|                          # æ•´å¥æ¨¡å¼ä¸‹ï¼Œè¾“å…¥syff/ å‡ºå•å­— å¢å¼ºå•å­—æ€§èƒ½


# === segmentor ===
abc_segmentor:
  extra_tags:
    - reverse_lookup

translator:
  dictionary: py
  prism: jk_flypy
  # initial_quality: 10000
  # æ˜¯å¦è‡ªåŠ¨è¡¥å…¨ï¼ˆé¢„æµ‹ï¼‰ï¼Œé…Œæƒ…å¼€å¯ã€‚
  # ... å¼€å¯ä¹‹åï¼Œæ‰“ ilqmmkyt çš„æ—¶å€™ï¼ŒäºŒé€‰ä¼šæ˜¯"åºŠå‰æ˜æœˆå…‰",
  # ... ä½†æ˜¯å½±å“3ç ç®€ç ï¼Œä¾‹å¦‚ idz é¦–é€‰ä¼šå˜æˆ"æ‹†å­—"è€Œé"æ‰¯çŠŠå­"
  enable_completion: false
  enable_charset_filter: true            # æ˜¯å¦å¼€å¯å­—ç¬¦é›†è¿‡æ»¤
  encode_commit_history: true            # æ˜¯å¦å¯¹å·²ä¸Šå±è¯è‡ªåŠ¨æˆè¯
  # é»˜è®¤ä¸ºä¸è¶…è¿‡ 2 ä¸ªå­—çš„å€™é€‰é¡¹æ˜¾ç¤ºè¾“å…¥ç ï¼›
  # ... å°† 2 æ”¹ä¸º 0 å¯å…³é—­ç¼–ç æç¤ºï¼Œ
  # ... æ”¹ä¸º 1 åˆ™æ˜¯åªæ˜¾ç¤ºå•å­—çš„è¾“å…¥ç ï¼Œä¾æ­¤ç±»æ¨
  spelling_hints: 1
  enable_sentence: false                 # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥
  enable_user_dict: true                 # æ˜¯å¦å¼€å¯ç”¨æˆ·è¯å…¸
  enable_encoder: true                   # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ è¯
  comment_format: {comment}


# === Lua é…ç½®: æ—¥æœŸæ—¶é—´(æ•´åˆç‰ˆ)çš„è§¦å‘å…³é”®å­— ===
date_translator:
  jk_datetime: iii


# === åæŸ¥ ===
reverse_lookup:
  dictionary: jk_ascii
  # prefix: "`"
  prefix: "/"
  suffix: ":"
  tips: ã€”å­—ç¬¦Â·åæŸ¥ã€•


# === è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt ===
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase               # å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼Œæ”¹æˆè‡ªå·±çš„ txt æ–‡ä»¶
  db_class: stabledb                     # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false               # è¡¥å…¨æç¤º
  enable_sentence: false                 # ç¦æ­¢é€ å¥
  initial_quality: 99                    # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§


# === Emoji ===
emoji:
  option_name: emoji
  opencc_config: emoji.json
  inherit_comment: false


# æ˜¾ç¤ºé¹¤å½¢æ‹†åˆ†
# æ‹†åˆ†è§„åˆ™ https://flypy.com/help/#/ux
chaifen:
  option_name: chaifen
  opencc_config: flyyx_cf.json
  tips: char
  show_in_comment: true
  comment_format:
    - "xform/	/ /"


# === æ ‡ç‚¹ç¬¦å·æ§åˆ¶ ===
punctuator:
  import_preset: default
  symbols:
    __include: symbols_z:/symbols

# === é”®ä½ç»‘å®š ===
key_binder:
  import_preset: default
  # è¿ç§»è‡³ default.custom.yaml ï¼Œä»¥æ–¹ä¾¿å¤šæ–¹æ¡ˆå…±äº«


recognizer:
  # import_preset: default
  patterns:
    # reverse_lookup: "`[a-z]*'?$"
    reverse_lookup: "/[a-z]*'?$"
    punct: "^z([0-9]|10|[A-Za-z]+)$"
